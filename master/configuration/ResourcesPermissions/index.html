<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Resources and permissions - QWC - 2025.10.13</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../../css/custom.css" rel="stylesheet" />
        <link href="../../css/version-select.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Resources and permissions";
        var mkdocs_page_input_path = "configuration/ResourcesPermissions.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> QWC - 2025.10.13
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">QWC</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../QuickStart/">Quick start</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">General configuration</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../ThemesConfiguration/">Themes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ViewerConfiguration/">Viewer</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">Resources and permissions</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#users-groups-and-roles">Users, groups and roles</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#resources">Resources</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#permissions">Permissions</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#map-permissions">Map permissions</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#viewer-task-permissions">Viewer task permissions</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#viewer-asset-permissions">Viewer asset permissions</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#wfsoapif-permissions">WFS/OAPIF permissions</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#group-registration">Group registration</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ServiceConfiguration/">Services</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Selected topics</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../topics/Search/">Search</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../topics/FeatureInfo/">Feature info</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../topics/Printing/">Printing</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../topics/MapExport/">Map export</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../topics/Mapinfo/">Map info</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../topics/Editing/">Editing</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../topics/Snapping/">Snapping</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../topics/TimeManager/">Temporal layers</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../topics/Tourguide/">Tour Guide</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../topics/LegendGraphics/">Legend graphics</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../topics/MapFilter/">Map filtering</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../topics/Reports/">Reports</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../topics/View3D/">3D View</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../topics/Translations/">Translations</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../topics/Interfacing/">Interfacing with applications</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../topics/MultiTenancy/">Multi-tenancy</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../references/">References</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Version history</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../release_notes/ChangeLog/">ChangeLog</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../release_notes/QWC2UpgradeNotes/">QWC2 upgrade notes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../release_notes/QwcDockerUpgradeNotes/">qwc-docker upgrade notes</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../UserGuide/">User guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../FAQ/">FAQ</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">QWC - 2025.10.13</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>QWC &raquo;</li>
          <li>General configuration &raquo;</li>
      <li>Resources and permissions</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="managing-users-resources-and-permissions">Managing Users, Resources and Permissions<a class="headerlink" href="#managing-users-resources-and-permissions" title="Permanent link">&para;</a></h1>
<p><code>qwc-docker</code> has a <a href="https://github.com/qwc-services/qwc-admin-gui">QWC configuration backend</a>. That backend can be reached by default at <a href="http://localhost:8088/qwc_admin">http://localhost:8088/qwc_admin</a>.</p>
<p>The configuration backend allows to assign users and groups to roles. The roles in their turn can receive permissions on resources. These configuration settings will be stored in the <a href="https://github.com/qwc-services/qwc-base-db">configuration database</a>. Out of the box <code>qwc-docker</code> comes with with a container <code>qwc-postgis</code> that contains the configuration database.</p>
<h2 id="users-groups-and-roles">Users, groups and roles<a class="headerlink" href="#users-groups-and-roles" title="Permanent link">&para;</a></h2>
<p>Roles can be given permissions on resources. That means that if you want to give users or groups permissions on resources, then you have to first create a role, configure the permissions that the roles has on some resources, and then assign the role the users or groups.</p>
<h2 id="resources">Resources<a class="headerlink" href="#resources" title="Permanent link">&para;</a></h2>
<p>The following resource types are available:</p>
<table>
<thead>
<tr>
<th>Resource name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Map</code></td>
<td>WMS service corresponding to a QGIS Project, see <a href="#map-permissions">Map permissions</a>.</td>
</tr>
<tr>
<td><code>├─ Layer</code></td>
<td>Layer of a map.</td>
</tr>
<tr>
<td><code>│  ╰─ Attribute</code></td>
<td>Layer attribute.</td>
</tr>
<tr>
<td><code>├─ Data</code></td>
<td>Dataset, for Editing, Feature Form, Attribute Table.</td>
</tr>
<tr>
<td><code>│  ╰─ Attribute</code></td>
<td>Attribute of a dataset.</td>
</tr>
<tr>
<td><code>├─ Data (create)</code></td>
<td>Dataset for creating features.</td>
</tr>
<tr>
<td><code>├─ Data (update)</code></td>
<td>Dataset for updating features.</td>
</tr>
<tr>
<td><code>├─ Data (delete)</code></td>
<td>Dataset for deleting features.</td>
</tr>
<tr>
<td><code>├─ Print template</code></td>
<td>Print composer template of a QGIS Project.</td>
</tr>
<tr>
<td><code>╰─ 3D Tiles Tileset</code></td>
<td>3D tiles tileset, see <a href="../../topics/View3D/">3D view</a>.</td>
</tr>
<tr>
<td><code>FeatureInfo service</code></td>
<td>Feature info service, see <a href="../../topics/FeatureInfo/#identify-permissions">Info permissions</a>.</td>
</tr>
<tr>
<td><code>╰─ FeatureInfo layer</code></td>
<td>Feature info layer.</td>
</tr>
<tr>
<td><code>╰─ Attribute</code></td>
<td>Attribute of an info layer.</td>
</tr>
<tr>
<td><code>WFS Service</code></td>
<td>WFS service, corresponding to a QGIS Project, see <a href="#wfs-permissions">WFS permissions</a>.</td>
</tr>
<tr>
<td><code>├─ WFS Layer</code></td>
<td>WFS layer.</td>
</tr>
<tr>
<td><code>│  ╰─ Attribute</code></td>
<td>Attribute of a WFS layer.</td>
</tr>
<tr>
<td><code>├─ WFS Layer (create)</code></td>
<td>WFS layer for creating features.</td>
</tr>
<tr>
<td><code>├─ WFS Layer (update)</code></td>
<td>WFS layer for updating features.</td>
</tr>
<tr>
<td><code>╰─ WFS Layer (delete)</code></td>
<td>WFS layer for deleting features.</td>
</tr>
<tr>
<td><code>Search facet</code></td>
<td>Fulltext search facet, see <a href="../../topics/Search/#search-permissions">Search permissions</a>.</td>
</tr>
<tr>
<td><code>Viewer task</code></td>
<td>Viewer task key, see <a href="#viewer-task-permissions">Viewer task permissions</a>.</td>
</tr>
<tr>
<td><code>Viewer asset</code></td>
<td>Viewer asset path, see <a href="#viewer-asset-permissions">Viewer asset permissions</a>.</td>
</tr>
<tr>
<td><code>Document template</code></td>
<td>Document template name, see <a href="../../topics/Reports/#Permissions">Report permissions</a>.</td>
</tr>
<tr>
<td><code>Theme info link</code></td>
<td>Theme info link name, see <a href="../ThemesConfiguration/#theme-info-links">theme info links</a>.</td>
</tr>
<tr>
<td><code>Map info query</code></td>
<td>Map info query identifier, see <a href="../../topics/Mapinfo/#permissions">Map info permissions</a>.</td>
</tr>
<tr>
<td><code>Plugin</code></td>
<td>Plugin name of <a href="../ThemesConfiguration/#plugin-data">Plugin data</a> entries.</td>
</tr>
<tr>
<td><code>╰─ Plugin data</code></td>
<td>Plugin resource name <a href="../ThemesConfiguration/#plugin-data">Plugin data</a> entries.</td>
</tr>
</tbody>
</table>
<p><em>Note</em>: New resource types, i.e. for custom QWC plugins, can be inserted into the <code>qwc_config.resource_types</code> table of the QWC configuration database..</p>
<h2 id="permissions">Permissions<a class="headerlink" href="#permissions" title="Permanent link">&para;</a></h2>
<p>Permissions are based on roles. Roles can be assigned to groups or users, and users can be members of groups.
A special role is <code>public</code>. The <code>public</code> role always applies, no matter whether a user is signed in or is not signed in.</p>
<p>Roles can be assigned permission for resources.</p>
<p>The <code>write</code> flag is only used for <code>Data</code> and <code>WFS Layer</code> resources and determines whether the dataset / WFS layer is read-only or writeable (the respective  <code>create</code> / <code>update</code> / <code>delete</code> allow for fine-grained CRUD permission control).</p>
<p>By using the <code>permissions_default_allow</code> configuration setting in <code>tenantConfig.json</code>, some resources can be set to be permitted or restricted by default if no permissions are set (default: <code>false</code>). Among affected resources are <code>Map</code>, <code>Layer</code>, <code>Print template</code>, <code>Viewer task</code>, <code>FeatureInfo service</code>, <code>FeatureInfo layer</code>. E.g.:</p>
<ul>
<li><code>permissions_default_allow=true</code>: all maps and layers are permitted by default</li>
<li><code>permissions_default_allow=false</code>: maps and layers are only available if their resources and permissions are explicitly configured</li>
</ul>
<p>Based on the user's identity (user name and/or group name), all corresponding roles and their permissions and restrictions are collected from the QWC configuration database by the <a href="https://github.com/qwc-services/qwc-config-generator">QWC Config Generator</a>, which then generates a <code>permissions.json</code> file.</p>
<p>The QWC services will read the <code>permissions.json</code> to filter the responses according to these permissions and restrictions, by using <code>PermissionClient::resource_permissions()</code> or <code>PermissionClient::resource_restrictions()</code> from <a href="https://github.com/qwc-services/qwc-services-core">QWC Services Core</a>.</p>
<h3 id="map-permissions">Map permissions<a name="map-permissions"></a><a class="headerlink" href="#map-permissions" title="Permanent link">&para;</a></h3>
<p>The <code>Map</code> resource permissions control whether a theme is visibile and whether the corresponding <code>WMS</code> is accessible via <code>qwc-ogc-service</code>. The name of a <code>Map</code> resource corresponds to the relative path to the project below <code>qgs-resources</code> without <code>.qgs</code> extension (so i.e. the resource name for <code>qgs-resources/subfolder/project.qgs</code> will be <code>subfolder/project</code>).</p>
<p><em>Note</em>: The display behaviour of restricted themes can be customized with the following settings in the <code>mapViewer</code> service config in <code>tenantConfig.json</code>:</p>
<ul>
<li><code>show_restricted_themes</code>: Whether to show placeholder items for restricted themes. Default: <code>false</code>.</li>
<li><code>show_restricted_themes_whitelist</code>: Whitelist of restricted theme names to display as placeholders. If empty, all restricted themes are shown. Only used if  <code>show_restricted_themes</code> enabled. Default: <code>[]</code>.</li>
<li><code>redirect_restricted_themes_to_auth</code>: Whether to redirect to login on auth service if requesting a restricted theme in URL params, if not currently signed in. Default: <code>false</code>.</li>
</ul>
<p>The <code>Layer</code> resource permissions control whether a theme layer is visibile and whether it is exposed via <code>WMS</code> by the <code>qwc-ogc-service</code>. The name of the <code>Layer</code> resource corresponds to the QGIS layer name, or its WMS short name, if one is set in the QGIS layer properties. </p>
<p>The <code>Layer → Attribute</code> resource permissions control whether a layer attribute is visibile in the WMS GetFeatureInfo results. The name of the <code>Attribute</code> resource corresponds to the QGIS field name (not its alias).</p>
<p>The <code>Print template</code> resource permissions control access to a QGIS print layout. The name of the <code>Print template</code> resource is the name of the QGIS print layout.</p>
<p><code>Map</code>, <code>Layer</code>, <code>Attributes</code>, <code>Print template</code> and <code>3D Tiles Tileset</code> resources are permitted by default if <code>permissions_default_allow</code> is <code>true</code>.</p>
<p>The <code>Data</code> and subordinate <code>Attribute</code> resources control whether access to a dataset is permitted via the <a href="https://github.com/qwc-services/qwc-data-service">qwc-data-service</a>. <code>Data</code> resources are not permitted by default. They are used for controlling the dataset accessible for <a href="../../topics/Editing/">Editing</a> and by the <a href="../../topics/FeatureInfo/#feature-form">FeatureForm</a>.</p>
<p>For more detailed <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a> permissions <code>Data (create)</code>, <code>Data (update)</code> and <code>Date (delete)</code> can be used instead of <code>Data</code>. A <code>Data</code> permission with <code>write=true</code> permits all CRUD operations.</p>
<h2 id="viewer-task-permissions">Viewer task permissions<a name="viewer-task-permissions"></a><a class="headerlink" href="#viewer-task-permissions" title="Permanent link">&para;</a></h2>
<p>The <code>Viewer task</code> resource defines viewer functionalities (e.g. <code>Print</code> or <code>MapExport</code>) which can be restricted.</p>
<p>The resource name will be matched against:</p>
<ul>
<li>The <code>key</code> in <code>menuItems</code> and <code>toolbarItems</code> in the QWC <code>config.json</code>.</li>
<li>The <code>name</code> of a plugin entry in <code>config.json</code>.</li>
<li>The <code>task</code> configuration property of a <code>TaskButton</code> plugin entry in <code>config.json</code></li>
</ul>
<p><em>Note</em>: You can restrict tasks entires which specify a mode (i.e. <code>{"key": "Measure", "mode": "LineString"}</code>) by concatenating the task key and the mode as the <code>viewer_task</code> resource name, i.e. <code>MeasureLineString</code>.</p>
<p>Restricted viewer task items are then removed from the menu and toolbar in the map viewer.</p>
<h2 id="viewer-asset-permissions">Viewer asset permissions<a name="viewer-asset-permissions"></a><a class="headerlink" href="#viewer-asset-permissions" title="Permanent link">&para;</a></h2>
<p>The <code>Viewer asset</code> resource defines viewer assets (i.e. files below the QWC assets folder) which can be restricted.</p>
<p>The resource name is a file path below the assets folder (i.e. <code>pdfs/mydocument.pdf</code> for <code>&lt;baseurl&gt;/assets/pdfs/mydocument.pdf</code>). The path can also contain wildcards (i.e. <code>pdfs/restricted/</code>), in which case all matching files will be restricted to permitted users only.</p>
<p>Accessing a viewer asset which is not permitted will result in a <code>404 Not Found</code> error.</p>
<h2 id="wfsoapif-permissions">WFS/OAPIF permissions<a name="wfs-permissions"></a><a class="headerlink" href="#wfsoapif-permissions" title="Permanent link">&para;</a></h2>
<p>WFS and OGC API Features (OAPIF) services are disabled by default and need to be explicitly permitted to be exposed by the <code>qwc-ogc-service</code>. The services also need to be published in in <code>QGIS → Project Properties → QGIS Server → WFS/OAPIF</code>.</p>
<p>The <code>WFS Service</code> resource permissions control whether a WFS service is exposed by the <code>qwc-ogc-service</code>. If a <code>WFS Service</code> is permitted, all its (published) child layers are permitted by default, without write permissions.</p>
<p>The <code>WFS Layer</code> resource permissions allow individually controlling whether child layers of a <code>WFS Service</code> are permitted and writable (via WFS-T or OAPIF). Aditionally, the <code>WFS Layer (create)</code>, <code>WFS Layer (update)</code> and <code>WFS Layer (delete)</code> resource permissions allow setting fine-grained CRUD permissions on the <code>WFS Layer</code>.</p>
<p>The <code>WFS Layer → Attribute</code> resource permissions allow controlling whether a WFS layer attribute is exposed via <code>qwc-ogc-service</code>.</p>
<h2 id="group-registration">Group registration<a class="headerlink" href="#group-registration" title="Permanent link">&para;</a></h2>
<p>Using the optional <a href="https://github.com/qwc-services/qwc-registration-gui">Registration GUI</a> allows users to request membership or unsubscribe from registrable groups. These requests can then be accepted or rejected in the <a href="https://github.com/qwc-services/qwc-admin-gui">Admin GUI</a>.</p>
<p>Workflow:</p>
<ul>
<li>Admin GUI</li>
<li>admin user creates new groups with assigned roles and permissions on resources</li>
<li>admin user configures registrable groups</li>
<li>Registration GUI</li>
<li>user select desired groups from registrable groups and submits application form</li>
<li>admin users are notified of new registration requests</li>
<li>Admin GUI</li>
<li>admin user selects entry from list of pending registration requests</li>
<li>admin user accepts or rejects registration requests for a user</li>
<li>user is added to or removed from accepted groups</li>
<li>user is notified of registration request updates</li>
<li>Map Viewer</li>
<li>user permissions are updated for new groups</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../ViewerConfiguration/" class="btn btn-neutral float-left" title="Viewer"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../ServiceConfiguration/" class="btn btn-neutral float-right" title="Services">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../ViewerConfiguration/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../ServiceConfiguration/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../js/extend-search.js" defer></script>
      <script src="../../search/main.js" defer></script>
      <script src="../../js/version-select.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
