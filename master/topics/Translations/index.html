<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Translations - QWC - 2025.09.02</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../../css/custom.css" rel="stylesheet" />
        <link href="../../css/version-select.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Translations";
        var mkdocs_page_input_path = "topics/Translations.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> QWC - 2025.09.02
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">QWC</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../QuickStart/">Quick start</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">General configuration</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/ThemesConfiguration/">Themes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/ViewerConfiguration/">Viewer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/ResourcesPermissions/">Resources and permissions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/ServiceConfiguration/">Services</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Selected topics</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../Search/">Search</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../FeatureInfo/">Feature info</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Printing/">Printing</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../MapExport/">Map export</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Mapinfo/">Map info</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Editing/">Editing</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Snapping/">Snapping</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../TimeManager/">Temporal layers</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Tourguide/">Tour Guide</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../LegendGraphics/">Legend graphics</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../MapFilter/">Map filtering</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Reports/">Reports</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../View3D/">3D View</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">Translations</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#translated-themes">Translated themes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#localized-viewer-asssets">Localized viewer asssets</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#adding-and-modifying-viewer-translations">Adding and modifying Viewer translations</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#selectively-overriding-translation-strings">Selectively overriding translation strings</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#specifying-the-default-fallback-translation">Specifying the default fallback translation</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Interfacing/">Interfacing with applications</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../MultiTenancy/">Multi-tenancy</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../references/">References</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Version history</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../release_notes/ChangeLog/">ChangeLog</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../release_notes/QWC2UpgradeNotes/">QWC2 upgrade notes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../release_notes/QwcDockerUpgradeNotes/">qwc-docker upgrade notes</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../UserGuide/">User guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../FAQ/">FAQ</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">QWC - 2025.09.02</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>QWC &raquo;</li>
          <li>Selected topics &raquo;</li>
      <li>Translations</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="translations">Translations <a name="translations"></a><a class="headerlink" href="#translations" title="Permanent link">&para;</a></h2>
<p>QWC Viewer translations are available for <a href="https://github.com/qgis/qwc2/tree/master/static/translations">multiple languags</a> (with varying degree of competeness).</p>
<p>By default, QWC will attempt to load the translation matching your browser language. Alternatively, you can explicitly specify the language by adding the <code>lang=&lt;lang&gt;</code> query parameter to the application URL, i.e. <code>lang=de-CH</code>.</p>
<p>The <a href="../../references/qwc2_plugins/#settings">Settings Plugin</a> furthermore allows graphically switching the language within QWC, with the list of available languages configured via the <code>languages</code> plugin configuration property.</p>
<h3 id="translated-themes">Translated themes<a class="headerlink" href="#translated-themes" title="Permanent link">&para;</a></h3>
<p>QWC also supports localized themes, including in particular the theme name, layer and attribute names.</p>
<p>As a prerequisite, the <a href="https://github.com/qwc-services/qwc-qgis-server-plugins?tab=readme-ov-file#get_translations"><code>get_translations</code></a> QGIS Server plugin needs be enabled, i.e. when using <code>qwc-qgis-server</code>:</p>
<pre><code class="language-yml">  qwc-qgis-server:
    image: docker.io/sourcepole/qwc-qgis-server:&lt;TAG&gt;
    volumes:
      - ./volumes/qgis-server-plugins/get_translations:/usr/share/qgis/python/plugins/get_translations:ro
    ...
</code></pre>
<p>Then, to localize a theme:</p>
<ol>
<li>In <code>QGIS → Project Properties → General</code>, generate a project translation file by selecting the source language and pressing <code>Generate TS File</code>.</li>
<li>Rename the generated <code>&lt;projectname&gt;.ts</code> to <code>&lt;projectname&gt;_&lt;lang&gt;.ts</code>, where <code>&lt;lang&gt;</code> is language code like <code>de</code> or <code>de-CH</code>.</li>
<li>Open the <code>&lt;projectname&gt;_&lt;lang&gt;.ts</code> with the <code>Qt Linguist</code> application and fill out the translations.</li>
</ol>
<p>Since the QGIS project translations mechanism does not currently allow translating some project strings which are useful for QWC, these need to be defined in an auxiliary translation file <code>&lt;projectname&gt;_&lt;lang&gt;.json</code> structured as follows:</p>
<pre><code class="language-json">{
  &quot;layouts&quot;: {
    &quot;&lt;layout_name&gt;&quot;: &quot;&lt;translated_layout_name&gt;&quot;,
    ...
  },
  &quot;theme&quot;: {
    &quot;title&quot;: &quot;&lt;translated_theme_title&gt;&quot;
  }
}
</code></pre>
<p>Finally, run the <code>ConfigGenerator</code> to include the translated theme names in the themes configuration.</p>
<h3 id="localized-viewer-asssets">Localized viewer asssets<a class="headerlink" href="#localized-viewer-asssets" title="Permanent link">&para;</a></h3>
<p>The <code>qwc-map-viewer</code> supports returning localized viewer assets if the <code>lang=&lt;lang&gt;-&lt;COUNTRY&gt;</code> query parameter is added to the asset URL, i.e.</p>
<pre><code>&lt;baseurl&gt;/assets/myfile.ext?lang=&lt;lang&gt;-&lt;COUNTRY&gt;
</code></pre>
<p>where <code>&lt;lang&gt;-&lt;COUNTRY&gt;</code> is a language-country code like <code>de-CH</code>.</p>
<p>The service will then check if <code>myfile_&lt;lang&gt;-&lt;COUNTRY&gt;.ext</code> or <code>myfile_&lt;lang&gt;.ext</code> exist, returning the first possible match, falling back to <code>myfile.ext</code> if neither exists.</p>
<h3 id="adding-and-modifying-viewer-translations">Adding and modifying Viewer translations<a class="headerlink" href="#adding-and-modifying-viewer-translations" title="Permanent link">&para;</a></h3>
<p>When working inside a <code>qwc-app</code> source folder, the translations are located at <code>qwc-app/static/translations</code>.</p>
<p>A script will take care of merging the translations from the <code>qwc2</code> package into the application translations. This way, when updating the <code>qwc2</code> dependency, new translations are automatically obtained. This script is automatically invoked on <code>yarn start</code>, but can also be manually invoked using</p>
<pre><code>yarn run tsupdate
</code></pre>
<p>Translations are stored inside the respective <code>translations</code> folder as regular plain-text JSON files, named <code>&lt;lang&gt;.json</code> and can be freely edited with any text editor.</p>
<p>The <code>tsconfig.json</code> files stored inside the respective <code>translations</code> folder contains the list of languages for which translations should be generated and a list of message IDs to include in the translation. The <code>tsupdate</code> script will automatically scan the code for message IDs (looking for static strings passed to <code>LocaleUtils.tr</code> and <code>LocaleUtils.trmsg</code>), store these in <code>tsconfig.json</code> and automatically create resp. update the translation files.</p>
<p>In some cases <code>tsconfig.json</code> will not pick up a message ID (for instance, if it is computed at runtime). In these cases, the message IDs can be added manually to the <code>extra_strings</code> section of the <code>tsconfig.json</code>.</p>
<p>Also it may be desired to override a translation inherited from the QWC components at application level. To prevent <code>tsupdate</code> from continuously reverting the overridden translation, the respective message IDs can be added to the <code>overrides</code> section in the application <code>tsconfig.json</code> file.</p>
<p>To add a new language, list it in <code>qwc-app/qwc2/translations/tsconfig.json</code> and run <code>yarn run tsupdate</code>, then complete the messages taking the english translation file as reference.</p>
<p>When adding or modifying translations at QWC components level, please contribute them by submitting a pull request to the <a href="https://github.com/qgis/qwc2">upstream qwc2 repository</a>.</p>
<h3 id="selectively-overriding-translation-strings">Selectively overriding translation strings<a class="headerlink" href="#selectively-overriding-translation-strings" title="Permanent link">&para;</a></h3>
<p>Occasionally, it is desireable to selectively override specific translation strings. While one can modify the full translation file as described above, especially when using the <code>qwc-map-viewer</code> docker image, it is easier to just selectively override the desired translation strings and leave the original file unchanged and avoid having to compile a custom viewer (or overwriting the entire file with a docker volume mount).</p>
<p>To do this:</p>
<ul>
<li>Set <code>loadTranslationOverrides</code> to <code>true</code> in <code>config.json</code>.</li>
<li>Create a <code>&lt;lang&gt;_overrides.json</code> containing just the ovverridden strings, for example <code>en-US_overrides.json</code>:</li>
</ul>
<pre><code class="language-json">{
  &quot;messages&quot;: {
    &quot;appmenu&quot;: {
      &quot;items&quot;: {
        &quot;LayerTree&quot;: &quot;Layers&quot;
      }
    }
  }
}
</code></pre>
<ul>
<li>Place this file inside the <code>translations</code> folder of your production build. When using <code>qwc-docker</code>, you can place this file in <code>qwc-docker/volumes/qwc2/translations/</code> and mount this file inside the container, i.e. :</li>
</ul>
<pre><code class="language-yml">qwc-map-viewer:
  image: sourcepole/qwc-map-viewer:vYYYY.MM.DD
  [...]
  volumes:
    - ./volumes/qwc2/translations/en-US_overrides.json:/qwc2/translations/en-US_overrides.json:ro
</code></pre>
<h3 id="specifying-the-default-fallback-translation">Specifying the default fallback translation<a class="headerlink" href="#specifying-the-default-fallback-translation" title="Permanent link">&para;</a></h3>
<p>When no translation exists for the requested language (i.e. the current browser language), QWC will fall back to the default translation specified as <code>defaultLocaleData</code> in <code>qwc2-app/js/appConfig.js</code>. For the stock application, the default fallback translation is <code>en-US</code>.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../View3D/" class="btn btn-neutral float-left" title="3D View"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../Interfacing/" class="btn btn-neutral float-right" title="Interfacing with applications">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../View3D/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../Interfacing/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../js/extend-search.js" defer></script>
      <script src="../../search/main.js" defer></script>
      <script src="../../js/version-select.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
