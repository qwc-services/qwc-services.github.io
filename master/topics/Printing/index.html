<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Printing - QWC2 - 2025.03.06-master</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../../css/custom.css" rel="stylesheet" />
        <link href="../../css/version-select.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Printing";
        var mkdocs_page_input_path = "topics/Printing.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> QWC2 - 2025.03.06-master
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">QWC2</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../QuickStart/">Quick start</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">General configuration</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/ThemesConfiguration/">Themes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/ViewerConfiguration/">Viewer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/ResourcesPermissions/">Resources and permissions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/ServiceConfiguration/">Services</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Selected topics</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../Search/">Search</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../FeatureInfo/">Feature info</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">Printing</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#configuring-print-background-layers">Configuring print background layers </a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#user-labels">User labels </a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#print-grid">Print grid </a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#layouts-with-legend">Layouts with legend </a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#atlas-printing">Atlas printing </a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#layout-templates">Layout templates </a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../MapExport/">Map export</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Mapinfo/">Map info</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Editing/">Editing</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Snapping/">Snapping</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../TimeManager/">Temporal layers</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../LegendGraphics/">Legend graphics</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../MapFilter/">Map filtering</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Reports/">Reports</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Interfacing/">Interfacing with applications</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../MultiTenancy/">Multi-tenancy</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../references/">References</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Version history</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../release_notes/ChangeLog/">ChangeLog</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../release_notes/QWC2UpgradeNotes/">QWC2 upgrade notes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../release_notes/QwcDockerUpgradeNotes/">qwc-docker upgrade notes</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../UserGuide/">User guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../FAQ/">FAQ</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">QWC2 - 2025.03.06-master</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>QWC2 &raquo;</li>
          <li>Selected topics &raquo;</li>
      <li>Printing</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="printing">Printing<a class="headerlink" href="#printing" title="Permanent link">&para;</a></h1>
<p>QWC2 supports printing to PDF via the QGIS Server <code>GetPrint</code> request.</p>
<p>The basic steps are:</p>
<ul>
<li>Ensure the <code>Print</code> plugin is enabled in the QWC2 viewer.</li>
<li>Create print layouts in the QGIS project as desired. The layouts must contain one Map element.</li>
<li><a href="../../configuration/ThemesConfiguration/#generating-theme-configuration">Generate the themes configuration</a>.</li>
</ul>
<p>The available print layouts will then appear in the QWC2 print plugin.</p>
<p>You can limit the available print scales by setting <code>printScales</code> (or <code>defaultPrintScales</code>) in the <a href="../../configuration/ThemesConfiguration/#manual-theme-configuration">theme configuration</a> to a list of scale denominators. If the list is empty, the print scale can be freely chosen.</p>
<p>Similarly, you can limit the available print resolutions by setting <code>printResolutions</code> (or <code>defaultPrintResolutions</code>) in the theme configuration to a list of resolutions. If the list is empty, the print resolution can be freely chosen.</p>
<p>External WMS layers are automatically printed if the <a href="../references/qwc2_plugins/#print">Print plugin config option</a> <code>printExternalLayers</code> is <code>true</code> (default). Note that printing external <code>WMTS</code> layers is currently not supported by the QGIS Server.</p>
<p>You can enable the option to generate a GeoPDF by setting the Print plugin config option <code>allowGeoPdfExport</code> to <code>true</code>. <em>Note:</em> This is only supported on QGIS Server 3.32 and newer.</p>
<p>You can select output format for printing layout. Default values are <code>application/pdf</code>, <code>image/jpeg</code>, <code>image/png</code> and <code>image/svg</code>. You can restrict formats to one or more of them by setting the Print plugin config option <code>formats</code> to an array of these formats. See <a href="https://docs.qgis.org/latest/en/docs/server_manual/services/wms.html#wms-getprint-format">QGIS Server documentation</a> for WMS GetPrint supported formats.</p>
<p>Finally, you can configure which print layout is selected by default by setting <code>defaultPrintLayout</code> to the name of the desired print layout in the <a href="../../configuration/ThemesConfiguration/#manual-theme-configuration">theme configuration</a>.</p>
<p>Some additional tasks include:</p>
<ul>
<li><a href="#background-layers">Configuring the print background layers</a></li>
<li><a href="#user-labels">Configuring user labels</a></li>
<li><a href="#print-grid">Configuring the print grid</a></li>
<li><a href="#print-legend">Configuring layouts with legend</a></li>
<li><a href="#print-atlas">Configuring atlas printing</a></li>
</ul>
<h2 id="configuring-print-background-layers">Configuring print background layers <a name="background-layers"></a><a class="headerlink" href="#configuring-print-background-layers" title="Permanent link">&para;</a></h2>
<p>Background layers are handled purely client-side in QWC2. There are two options for printing the background layer:</p>
<p>The first option is to add a <code>printLayer</code> to the background layer entry when writing the <a href="../../configuration/ThemesConfiguration/#manual-theme-configuration">themes configuration</a>, i.e.:</p>
<pre><code class="language-json">{
  ...
  &quot;backgroundLayers&quot;: [
      {&quot;name&quot;: &quot;&lt;background layer name&gt;&quot;, &quot;printLayer&quot;: &quot;&lt;qgis layer name or resource string&gt;&quot;}
  ]
}
</code></pre>
<p>You can set <code>printLayer</code> to a QGIS layer name, or to a resource string (i.e. <code>wms:&lt;baseurl&gt;#&lt;layername&gt;</code>). A QGIS layer marked as <code>printLayer</code> will be filtered out from the QWC2 layer tree, and hence will not be displayed in QWC2.</p>
<p>You can also set <code>printLayer</code> to a list <code>[{"maxScale": &lt;scale&gt;, "name": "&lt;layer name&gt;"}, ..., {"maxScale": null, "name": "&lt;QGis layer name&gt;"}]</code>, ordered in ascending order by <code>maxScale</code>. The last entry should have <code>maxScale</code> <code>null</code>, as the layer used for all remaining scales.</p>
<p>This approach allows i.e. using a WMTS background layer in the web client for higher performance, and using a WMS background layer when printing for higher quality/resolution.</p>
<p>The second option is to use WMS background layers, which are automatically printed as external layers.</p>
<h2 id="user-labels">User labels <a name="user-labels"></a><a class="headerlink" href="#user-labels" title="Permanent link">&para;</a></h2>
<p>User labels appear as free-text input fields in the QWC2 print dialog. To configure user labels, it is sufficient to add item <code>id</code>s to layout label items in the print layout. The specified <code>id</code> will appear as input field label in the QWC2 print dialog.</p>
<p><em>Note</em>: Label <code>id</code>s beginning with <code>__</code> (two underscore characters) are ignored as user labels by QWC2.</p>
<p>You can can customize the input field (max length, number of rows) by setting the <code>printLabelConfig</code> in the <a href="../../configuration/ThemesConfiguration/#manual-theme-configuration">theme configuration</a>.</p>
<p>Also, in the theme configuration, you can also set:</p>
<ul>
<li><code>printLabelForSearchResult</code>: The <code>id</code> of the label to which to write the current search result label, if any.</li>
<li><code>printLabelForAttribution</code>: The <code>id</code> of the label to which to write the current map attribution text, if any.</li>
</ul>
<p>If you set the <a href="../references/qwc2_plugins/#print">Print plugin config option</a> <code>hideAutopopulatedFields</code> to <code>true</code>, these labels will not be shown in the print dialog, otherwise they will be displayed as read-only fields.</p>
<h2 id="print-grid">Print grid <a name="print-grid"></a><a class="headerlink" href="#print-grid" title="Permanent link">&para;</a></h2>
<p>In alternative to configuring a grid directly in the print layout, one can also define a <code>printGrid</code> configuration in the <a href="../../configuration/ThemesConfiguration/#manual-theme-configuration">theme configuration</a>. For example</p>
<pre><code class="language-json">&quot;printGrid&quot;: {
  &quot;s&quot;: 1000, &quot;x&quot;: 500, &quot;y&quot;: 500,
  &quot;s&quot;: 2000, &quot;y&quot;: 1000, &quot;y&quot;: 1000,
  &quot;s&quot;: 10000, &quot;y&quot;: 5000, &quot;y&quot;: 5000,
}
</code></pre>
<p>will print a <code>500x500</code> (map units) grid for scales up to <code>1:1000</code>, a <code>1000x1000</code> grid for scales up to <code>1:2000</code>, etc.</p>
<h2 id="layouts-with-legend">Layouts with legend <a name="print-legend"></a><a class="headerlink" href="#layouts-with-legend" title="Permanent link">&para;</a></h2>
<p>The QWC2 print dialog will expose a toggle switch to enable the legend in the print output for layout <code>&lt;layout_name&gt;</code> if the QGIS project contains a second layout named <code>&lt;layout_name&gt;_legend</code>. The layout with the <code>_legend</code> suffix is expected to contain a legend item.</p>
<h2 id="atlas-printing">Atlas printing <a name="print-atlas"></a><a class="headerlink" href="#atlas-printing" title="Permanent link">&para;</a></h2>
<p>To enable atlas printing in QWC2, configure the QGIS project as follows:</p>
<ul>
<li>Check the <code>Generate an atlas</code> checkbox in the desired layout in QGIS layout designer &rarr; Atlas &rarr; Atlas settings, selecting the coverage layer as desired.</li>
<li>In the layout map item properties, check <code>Controlled by Atlas</code>.</li>
<li>In the Project properties &rarr; QGIS Server, set <code>Maximum features for Atlas print requests</code> to the desired value.</li>
</ul>
<p>QWC2 will then display a feature picked in the print dialog which will allow picking the desired atlas features, and QGIS Server will generate a multi-page PDF accordingly.</p>
<h2 id="layout-templates">Layout templates <a name="layout-templates"></a><a class="headerlink" href="#layout-templates" title="Permanent link">&para;</a></h2>
<p>The <a href="https://github.com/qwc-services/qwc-qgis-server-plugins">QGIS Server print templates plugin</a> allows providing a common set of print layouts to projects to avoid having to manage potentially identical print layouts multiple times in the individual projects.</p>
<p>To configure it in <code>qwc-docker</code>, proceed as follows:</p>
<ul>
<li>Download the <a href="https://github.com/qwc-services/qwc-qgis-server-plugins">QGIS Server print templates plugin</a>, i.e. to <code>volumes/qgis-server-plugins/print_templates</code>, choose a print layout folder (i.e. <code>volumes/print-layouts</code>) and configure the <code>qwc-qgis-server</code> container as follows:</li>
</ul>
<pre><code class="language-yml">  qwc-qgis-server:
    image: docker.io/sourcepole/qwc-qgis-server:&lt;TAG&gt;
    environment:
      FCGID_EXTRA_ENV: 'PRINT_LAYOUT_DIR'
      PRINT_LAYOUT_DIR: '/layouts'
    volumes:
      - ./volumes/qgis-server-plugins/print_templates:/usr/share/qgis/python/plugins/print_templates:ro
      - ./volumes/print-layouts:/layouts:ro
    ...
</code></pre>
<ul>
<li>Mount the print layout folder also into the config generator container:</li>
</ul>
<pre><code class="language-yml">qwc-config-service:
    image: docker.io/sourcepole/qwc-config-generator:&lt;TAG&gt;
    volumes:
      - ./volumes/print-layouts:/layouts:ro
      ...
</code></pre>
<ul>
<li>Extend the config generator configuration in <code>tenantConfig.json</code> by specifying the location of the print layouts dir:</li>
</ul>
<pre><code class="language-json">{
  &quot;config&quot;: {
    &quot;qgis_print_layouts_dir&quot;: &quot;/layouts&quot;
    ...
  }
  ...
}
</code></pre>
<ul>
<li>In a multi-tenant environment, to provide separate print layouts for each tenant, organize the layouts in separate directories for each tenant below <code>qgis_print_layouts_dir</code>, and specify <code>qgis_print_layouts_tenant_subdir</code> in the respective <code>tenantConfig.json</code> to point to the desired subdir path.</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../FeatureInfo/" class="btn btn-neutral float-left" title="Feature info"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../MapExport/" class="btn btn-neutral float-right" title="Map export">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../FeatureInfo/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../MapExport/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
      <script src="../../js/version-select.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
